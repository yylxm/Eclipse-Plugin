<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Calibri",sans-serif;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"页眉 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	layout-grid-mode:char;
	border:none;
	padding:0cm;
	font-size:9.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"页脚 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Calibri",sans-serif;}
span.Char
	{mso-style-name:"页眉 Char";
	mso-style-link:页眉;}
span.Char0
	{mso-style-name:"页脚 Char";
	mso-style-link:页脚;}
.MsoChpDefault
	{font-family:"Calibri",sans-serif;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
-->
</style>

</head>

<body lang=ZH-CN style='text-justify-trim:punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<p class=MsoNormal style='line-height:150%'><b><span lang=EN-US
style='font-size:16.0pt;line-height:150%'>Init</span></b><b><span
style='font-size:16.0pt;line-height:150%;font-family:宋体'>函数</span></b></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>init</span><span style='font-family:宋体'>函数代表</span><span lang=EN-US>operator</span><span
style='font-family:宋体'>初始化运算过程，<b><u>为块语句，可以包含任意程序员自定义的变量声明和语句内容</u></b>，并仅在</span><span
lang=EN-US>operator</span><span style='font-family:宋体'>第一次执行时执行。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal style='line-height:150%'><b><span lang=EN-US
style='font-size:16.0pt;line-height:150%'>work</span></b><b><span
style='font-size:16.0pt;line-height:150%;font-family:宋体'>函数</span></b></p>

<p class=MsoNormal style='text-indent:21.2pt;line-height:150%'><span
lang=EN-US>work</span><span style='font-family:宋体'>函数代表</span><span lang=EN-US>operator</span><span
style='font-family:宋体'>的最细粒度的运算部分，<b><u>为块语句，可以包含任意程序员自定义的变量声明和语句内容</u></b>，是</span><span
lang=EN-US>operator</span><span style='font-family:宋体'>的核心结构和数据流程序稳态执行过程中每次计算的执行单元。</span><span
lang=EN-US>work</span><span style='font-family:宋体'>函数内含有对</span><span
lang=EN-US>operator</span><span style='font-family:宋体'>输入流、输出流数据的操作。</span></p>

<p class=MsoNormal style='text-indent:21.2pt;line-height:150%'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal style='line-height:150%'><b><span lang=EN-US
style='font-size:16.0pt;line-height:150%'>Window</span></b></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>window</span><span style='font-family:宋体'>结构规定了</span><span
lang=EN-US>work</span><span style='font-family:宋体'>函数每次执行时所需的输入流和输出流窗口类型以及大小。窗口类型有两种：</span><span
lang=EN-US>sliding</span><span style='font-family:宋体'>和</span><span lang=EN-US>tumbling</span><span
style='font-family:宋体'>。</span><span lang=EN-US>sliding</span><span
style='font-family:宋体'>代表滑动窗口类型，这种窗口类型带有</span><span lang=EN-US>2</span><span
style='font-family:宋体'>个参数，第一个指定滑动窗口长度，第二个指定每次滑动的距离，单位都是数据流中数据项的个数。例子，</span><span
lang=EN-US> S sliding(10,1);</span><span style='font-family:宋体'>表示</span><span
lang=EN-US>Stream</span><span style='font-family:宋体'>流</span><span lang=EN-US>S</span><span
style='font-family:宋体'>上定义了一个</span><span lang=EN-US>sliding</span><span
style='font-family:宋体'>窗口，长度为</span><span lang=EN-US>10</span><span
style='font-family:宋体'>个数据项长度，</span><span lang=EN-US>work</span><span
style='font-family:宋体'>函数每次执行后，向后滑动</span><span lang=EN-US>1</span><span
style='font-family:宋体'>个数据项长度。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US>tumbling</span><span style='font-family:宋体'>则代表翻转窗口类型，这种窗口只带有</span><span
lang=EN-US>1</span><span style='font-family:宋体'>个参数，指定窗口长度。如</span><span
lang=EN-US>T tumbling(10);</span><span style='font-family:宋体'>表示</span><span
lang=EN-US>stream</span><span style='font-family:宋体'>流</span><span lang=EN-US>T</span><span
style='font-family:宋体'>上定义了一个</span><span lang=EN-US>tumbling</span><span
style='font-family:宋体'>窗口，窗口长度为</span><span lang=EN-US>10</span><span
style='font-family:宋体'>个数据项长度，</span><span lang=EN-US>work</span><span
style='font-family:宋体'>函数每次执行后，窗口中的</span><span lang=EN-US>10</span><span
style='font-family:宋体'>个数据被清空。对于输入数据流，表示</span><span lang=EN-US>10</span><span
style='font-family:宋体'>个数据被消耗，输入流中后续数据将进入窗口；对于输出数据流，表示</span><span lang=EN-US>10</span><span
style='font-family:宋体'>产生的数据已经填满窗口，将被全部输出到输出数据流中，后续产生的数据将继续填充窗口。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体'>一般而言，</span><span lang=EN-US>sliding</span><span
style='font-family:宋体'>常用于输入数据流，而</span><span lang=EN-US>tumbling</span><span
style='font-family:宋体'>常用于输出数据流。</span></p>

<p class=MsoNormal style='line-height:150%'><b><u><span lang=EN-US>work</span></u></b><b><u><span
style='font-family:宋体'>函数采用窗口触发机制执行：</span></u></b><span style='font-family:
宋体'>即只有当数据填满</span><span lang=EN-US>window</span><span style='font-family:宋体'>时，</span><span
lang=EN-US>work</span><span style='font-family:宋体'>函数才会执行，否者</span><span
lang=EN-US>operator</span><span style='font-family:宋体'>将会一直等待，直到有足够的数据。</span></p>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal style='line-height:150%'><b><span lang=EN-US
style='font-size:16.0pt;line-height:150%'>stream</span></b><b><span
style='font-size:16.0pt;line-height:150%;font-family:宋体'>数据的访问</span></b></p>

<p class=MsoNormal style='text-indent:21.1pt;line-height:150%'><b><u><span
lang=EN-US style='color:black'>operator</span></u></b><b><u><span
style='font-family:宋体;color:black'>输入流和输出流数据只能在</span><span lang=EN-US
style='color:black'>work</span></u></b><b><u><span style='font-family:宋体;
color:black'>函数中访问。</span></u></b><span style='font-family:宋体;color:black'>访问的方式采用</span><span
lang=EN-US style='color:black'>C</span><span style='font-family:宋体;color:black'>语言的数组下标访问方式，访问的下标按照输入流与输出流在</span><span
lang=EN-US style='color:black'>window</span><span style='font-family:宋体;
color:black'>队列中的顺序采用</span><span lang=EN-US style='color:black'>FIFO</span><span
style='font-family:宋体;color:black'>编号。图</span><span lang=EN-US
style='color:black'>1</span><span style='font-family:宋体;color:black'>显示了</span><span
lang=EN-US style='color:black'>window</span><span style='font-family:宋体;
color:black'>中流数据下标访问的顺序。</span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt;
line-height:150%'><span lang=EN-US style='color:black'><img width=348
height=189 id="图片 1"
src="Init%20Work%20Window%20and%20Stream.files/image001.png"></span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:24.0pt;
line-height:150%'><span style='font-size:9.0pt;line-height:150%;font-family:
宋体'>图</span><span lang=EN-US style='font-size:9.0pt;line-height:150%'>1</span><span
style='font-size:9.0pt;line-height:150%;font-family:宋体'>：</span><span
style='font-size:9.0pt;line-height:150%'> <span lang=EN-US style='color:black'>window</span></span><span
style='font-size:9.0pt;line-height:150%;font-family:宋体;color:black'>中流数据下标访问的顺序</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体;color:black'>对于流数据项的每一个分量，采用类似于</span><span lang=EN-US
style='color:black'>C</span><span style='font-family:宋体;color:black'>语言中结构体分量的访问方式，采用取分量的“</span><span
lang=EN-US style='color:black'>.</span><span style='font-family:宋体;color:black'>”操作来实现。如，</span><span
lang=EN-US style='color:black'>stream&lt;int x, int y&gt; S; S[0].x</span><span
style='font-family:宋体;color:black'>表示取</span><span lang=EN-US style='color:
black'>S</span><span style='font-family:宋体;color:black'>的</span><span
lang=EN-US style='color:black'>window</span><span style='font-family:宋体;
color:black'>中下标为</span><span lang=EN-US style='color:black'>0</span><span
style='font-family:宋体;color:black'>的数据项中的整型分量</span><span lang=EN-US
style='color:black'>x</span><span style='font-family:宋体;color:black'>。</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
style='font-family:宋体'>以图</span><span lang=EN-US>2</span><span
style='font-family:宋体'>的</span><span lang=EN-US>source</span><span
style='font-family:宋体'>节点为例，其</span><span lang=EN-US>state</span><span
style='font-family:宋体'>函数内声明了一个整型变量</span><span lang=EN-US>x</span><span
style='font-family:宋体'>，并在</span><span lang=EN-US>init</span><span
style='font-family:宋体'>函数中初始化为</span><span lang=EN-US>0</span><span
style='font-family:宋体'>。</span><span lang=EN-US>work</span><span
style='font-family:宋体'>函数中每次执行都会对</span><span lang=EN-US>x</span><span
style='font-family:宋体'>执行加</span><span lang=EN-US>1</span><span
style='font-family:宋体'>操作，并将结果赋给输出流（</span><span lang=EN-US>S</span><span
style='font-family:宋体'>：</span><span lang=EN-US>S[0].i=x</span><span
style='font-family:宋体'>）。</span><span lang=EN-US>window</span><span
style='font-family:宋体'>定义了</span><span lang=EN-US>source</span><span
style='font-family:宋体'>的输出流</span><span lang=EN-US>S</span><span
style='font-family:宋体'>的窗口类型为</span><span lang=EN-US>tumbling</span><span
style='font-family:宋体'>，并决定了大小为</span><span lang=EN-US>1</span><span
style='font-family:宋体'>（</span><span lang=EN-US>S tumbling (1)</span><span
style='font-family:宋体'>）。所以，</span><span lang=EN-US>source</span><span
style='font-family:宋体'>作为由“</span><span lang=EN-US>0</span><span
style='font-family:宋体'>”开始的自然数序列数据源，每次产生一个递增为</span><span lang=EN-US>1</span><span
style='font-family:宋体'>的输出数据。</span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt;
line-height:150%'><span lang=EN-US><img width=202 height=294 id="图片 6"
src="Init%20Work%20Window%20and%20Stream.files/image002.png"></span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:24.0pt'><span
style='font-size:9.0pt;font-family:宋体'>图</span><span lang=EN-US
style='font-size:9.0pt'>2</span><span style='font-size:9.0pt;font-family:宋体'>：</span><span
lang=EN-US style='font-size:9.0pt'> operator</span><span style='font-size:9.0pt;
font-family:宋体'>的构成</span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.0pt;
line-height:150%'><span lang=EN-US>&nbsp;</span></p>

</div>

</body>

</html>
